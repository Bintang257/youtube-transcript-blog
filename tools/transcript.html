<!DOCTYPE html>
<html lang='id'>
<head>
    <meta charset='UTF-8'/>
    <meta content='width=device-width,initial-scale=1' name='viewport'/>
    <title>YouTube Transcript Extractor - Gratis & Mudah</title>
    <meta name="description" content="Ekstrak transkrip video YouTube secara gratis, cepat, dan mudah tanpa registrasi."/>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; line-height: 1.6; color: #333; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        .tool-card { background: white; border-radius: 20px; padding: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        .tool-header { text-align: center; margin-bottom: 20px; }
        .tool-header h2 { font-size: 1.5rem; color: #2c3e50; }
        .input-group { display: flex; flex-direction: column; gap: 10px; }
        .url-input { padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 14px; }
        .url-input:focus { outline: none; border-color: #667eea; }
        .extract-btn { padding: 12px; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer; }
        .extract-btn:disabled { opacity: 0.6; cursor: not-allowed; }
        .extract-btn.loading::before { content: ''; display: inline-block; width: 16px; height: 16px; border: 2px solid #fff; border-top-color: transparent; border-radius: 50%; animation: spin 1s linear infinite; margin-right: 8px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .status-message { padding: 12px; border-radius: 8px; margin: 10px 0; display: none; font-size: 14px; }
        .status-success { background: #d4edda; color: #155724; }
        .status-error { background: #f8d7da; color: #721c24; }
        .status-loading { background: #d1ecf1; color: #0c5460; }
        .result-area { background: #f8f9ff; border: 2px solid #e9ecef; border-radius: 8px; padding: 15px; max-height: 300px; overflow-y: auto; font-family: monospace; font-size: 12px; display: none; }
        .result-actions { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; justify-content: center; }
        .action-btn { padding: 8px 16px; border: none; border-radius: 8px; cursor: pointer; font-size: 12px; }
        .copy-btn { background: #28a745; color: white; }
        .download-btn { background: #007bff; color: white; }
        .clear-btn { background: #6c757d; color: white; }
        .github-btn { background: #17a2b8; color: white; }
        .ad-container { background: #f8f9fa; border: 2px dashed #dee2e6; border-radius: 8px; padding: 20px; text-align: center; margin: 10px 0; display: none; }
        @media (max-width: 768px) { .tool-card { padding: 15px; } .url-input, .extract-btn { font-size: 12px; padding: 10px; } }
    </style>
</head>
<body>
    <div class="container">
        <main class="tool-card">
            <div class="tool-header">
                <h2>Extract Transcript YouTube</h2>
                <p>Masukkan URL video YouTube untuk mendapatkan transkrip</p>
            </div>
            <div class="input-group">
                <input type="url" class="url-input" id="youtubeUrl" placeholder="https://www.youtube.com/watch?v=example" aria-label="Masukkan URL Video YouTube"/>
                <select id="languageSelect" class="url-input" aria-label="Pilih bahasa transkrip">
                    <option value="auto">Pilih Bahasa (Otomatis)</option>
                </select>
                <button class="extract-btn" onclick="extractTranscript()" id="extractBtn" aria-label="Ekstrak transkrip">Extract Transcript</button>
            </div>
            <div class="status-message" id="statusMessage" role="alert"></div>
            <div class="ad-container" id="adContainer">
                <div class="ad-placeholder">[ Advertisement ]</div>
            </div>
            <div class="result-area" id="resultArea" aria-live="polite"></div>
            <div class="result-actions" id="resultActions" style="display: none;">
                <button class="action-btn copy-btn" onclick="copyTranscript()" aria-label="Salin transkrip">üìã Copy</button>
                <button class="action-btn download-btn" onclick="downloadTranscript()" aria-label="Unduh transkrip">üíæ Download</button>
                <button class="action-btn clear-btn" onclick="clearResult()" aria-label="Hapus hasil">üóëÔ∏è Clear</button>
                <button class="action-btn github-btn" onclick="saveTranscriptToGitHub()" aria-label="Simpan ke Blog">üìù Save to Blog</button>
            </div>
        </main>
    </div>
    <script>
        let currentTranscript = '';
        let videoTitle = '';

        function showStatus(message, type) {
            const statusElement = document.getElementById('statusMessage');
            statusElement.textContent = message;
            statusElement.className = `status-message status-${type}`;
            statusElement.style.display = 'block';
            setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
        }

        function extractVideoId(url) {
            const regex = /(?:youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/)|youtu\.be\/)([^&\n?#]+)/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        function sanitizeInput(input) {
            return input.replace(/[<>&"]/g, function(match) {
                return { '<': '&lt;', '>': '&gt;', '&': '&amp;', '"': '&quot;' }[match];
            });
        }

        async function loadLanguages(videoId) {
            const languageSelect = document.getElementById('languageSelect');
            languageSelect.innerHTML = '<option value="auto">Pilih Bahasa (Otomatis)</option>';
            try {
                const apiKey = 'YOUR_YOUTUBE_API_KEY'; // Ganti dengan API Key Anda
                const apiUrl = `https://www.googleapis.com/youtube/v3/captions?videoId=${videoId}&part=snippet&key=${apiKey}`;
                const response = await fetch(apiUrl);
                if (response.ok) {
                    const data = await response.json();
                    data.items.forEach(item => {
                        const option = document.createElement('option');
                        option.value = item.snippet.language;
                        option.textContent = item.snippet.name || item.snippet.language;
                        languageSelect.appendChild(option);
                    });
                }
            } catch (error) {
                console.error('Gagal memuat daftar bahasa:', error);
            }
        }

        async function extractTranscript() {
            const urlInput = document.getElementById('youtubeUrl');
            const languageSelect = document.getElementById('languageSelect');
            const url = sanitizeInput(urlInput.value.trim());
            const selectedLanguage = languageSelect.value || 'auto';

            if (!url) {
                showStatus('‚ö†Ô∏è Silakan masukkan URL YouTube!', 'error');
                return;
            }

            const videoId = extractVideoId(url);
            if (!videoId) {
                showStatus('‚ùå URL YouTube tidak valid!', 'error');
                return;
            }

            const cacheKey = `transcript_${videoId}_${selectedLanguage}`;
            const cachedTranscript = localStorage.getItem(cacheKey);
            if (cachedTranscript) {
                currentTranscript = cachedTranscript;
                videoTitle = localStorage.getItem(`title_${videoId}`) || `YouTube Video ${videoId}`;
                displayResult();
                showStatus('‚úÖ Menggunakan transcript dari cache!', 'success');
                document.getElementById('adContainer').classList.add('show');
                return;
            }

            const extractBtn = document.getElementById('extractBtn');
            extractBtn.disabled = true;
            extractBtn.classList.add('loading');
            extractBtn.innerHTML = 'Memproses';
            showStatus('üîÑ Sedang mengextract transcript...', 'loading');

            try {
                const apiKey = 'YOUR_YOUTUBE_API_KEY'; // Ganti dengan API Key Anda
                const apiUrl = `https://www.googleapis.com/youtube/v3/captions?videoId=${videoId}&part=snippet&key=${apiKey}`;
                const response = await fetch(apiUrl);
                if (!response.ok) {
                    throw new Error('Gagal mengambil data dari YouTube API');
                }

                const data = await response.json();
                if (!data.items || data.items.length === 0) {
                    throw new Error('Video ini tidak memiliki subtitle/closed caption.');
                }

                let captionId;
                if (selectedLanguage === 'auto') {
                    captionId = data.items[0].id;
                } else {
                    const caption = data.items.find(item => item.snippet.language === selectedLanguage);
                    if (!caption) {
                        throw new Error(`Subtitle untuk bahasa ${selectedLanguage} tidak tersedia.`);
                    }
                    captionId = caption.id;
                }

                const captionUrl = `https://www.googleapis.com/youtube/v3/captions/${captionId}?tfmt=srt&key=${apiKey}`;
                const captionResponse = await fetch(captionUrl);
                if (!captionResponse.ok) {
                    throw new Error('Gagal mengambil transcript.');
                }

                currentTranscript = await captionResponse.text();
                videoTitle = data.items[0].snippet.title || `YouTube Video ${videoId}`;
                displayResult();
                localStorage.setItem(cacheKey, currentTranscript);
                localStorage.setItem(`title_${videoId}`, videoTitle);
                showStatus('‚úÖ Transcript berhasil diextract!', 'success');
                document.getElementById('adContainer').classList.add('show');
            } catch (error) {
                let errorMessage = 'Terjadi kesalahan saat mengextract transkrip.';
                if (error.message.includes('Gagal mengambil data')) {
                    errorMessage = 'Gagal terhubung ke YouTube API. Periksa koneksi atau API Key.';
                } else if (error.message.includes('tidak memiliki subtitle')) {
                    errorMessage = 'Video ini tidak memiliki subtitle/closed caption.';
                } else if (error.message.includes('bahasa')) {
                    errorMessage = error.message;
                }
                showStatus(`‚ùå Error: ${errorMessage}`, 'error');
            } finally {
                extractBtn.disabled = false;
                extractBtn.classList.remove('loading');
                extractBtn.innerHTML = 'Extract Transcript';
            }
        }

        function displayResult() {
            const resultArea = document.getElementById('resultArea');
            const resultActions = document.getElementById('resultActions');
            resultArea.textContent = currentTranscript;
            resultArea.style.display = 'block';
            resultActions.style.display = 'flex';
            resultArea.scrollIntoView({ behavior: 'smooth' });
        }

        function copyTranscript() {
            if (!currentTranscript) {
                showStatus('‚ùå Tidak ada transcript untuk disalin!', 'error');
                return;
            }
            navigator.clipboard.writeText(currentTranscript).then(() => {
                showStatus('üìã Transcript disalin!', 'success');
            }).catch(() => {
                showStatus('‚ùå Gagal menyalin transcript!', 'error');
            });
        }

        function downloadTranscript() {
            if (!currentTranscript) {
                showStatus('‚ùå Tidak ada transcript untuk didownload!', 'error');
                return;
            }
            const blob = new Blob([currentTranscript], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `transcript-${Date.now()}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            showStatus('üíæ Transcript didownload!', 'success');
        }

        function clearResult() {
            currentTranscript = '';
            videoTitle = '';
            document.getElementById('resultArea').style.display = 'none';
            document.getElementById('resultActions').style.display = 'none';
            document.getElementById('youtubeUrl').value = '';
            document.getElementById('languageSelect').innerHTML = '<option value="auto">Pilih Bahasa (Otomatis)</option>';
            document.getElementById('adContainer').classList.remove('show');
            showStatus('üóëÔ∏è Hasil dihapus!', 'success');
        }

        async function saveTranscriptToGitHub() {
            if (!currentTranscript) {
                showStatus('‚ùå Tidak ada transcript untuk disimpan!', 'error');
                return;
            }
            const token = prompt('Masukkan GitHub Personal Access Token:');
            if (!token) {
                showStatus('‚ùå Token GitHub diperlukan!', 'error');
                return;
            }
            const owner = 'Bintang257';
            const repo = 'youtube-transcript-blog';
            const path = `_posts/${new Date().toISOString().split('T')[0]}-${videoTitle.replace(/[^a-zA-Z0-9]/g, '-')}.md`;
            const content = btoa(`---
            document.getElementById('youtubeUrl').addEventListener('input', function() {
             const url = this.value.trim();
             const videoId = extractVideoId(url);
             if (videoId) {
                 loadLanguages(videoId);
             }
         });

         document.getElementById('youtubeUrl').addEventListener('keypress', function(e) {
             if (e.key === 'Enter') {
                 extractTranscript();
             }
         });
     </script>
 </body>
 </html>
 ```
            
