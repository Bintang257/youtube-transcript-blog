<!DOCTYPE html>
<html lang='id'>
<head>
    <meta charset='UTF-8'/>
    <meta content='width=device-width,initial-scale=1' name='viewport'/>
    <title>YouTube Transcript Extractor - Gratis & Mudah</title>
    <meta name="description" content="Ekstrak transkrip video YouTube secara gratis tanpa API Key."/>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; line-height: 1.6; color: #333; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        .tool-card { background: white; border-radius: 20px; padding: 20px; box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        .tool-header { text-align: center; margin-bottom: 20px; }
        .tool-header h2 { font-size: 1.5rem; color: #2c3e50; }
        .input-group { display: flex; flex-direction: column; gap: 10px; }
        .url-input { padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 14px; }
        .url-input:focus { outline: none; border-color: #667eea; }
        .extract-btn { padding: 12px; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 14px; cursor: pointer; }
        .extract-btn:disabled { opacity: 0.6; cursor: not-allowed; }
        .status-message { padding: 12px; border-radius: 8px; margin: 10px 0; display: none; font-size: 14px; }
        .status-success { background: #d4edda; color: #155724; }
        .status-error { background: #f8d7da; color: #721c24; }
        .result-area { background: #f8f9ff; border: 2px solid #e9ecef; border-radius: 8px; padding: 15px; max-height: 300px; overflow-y: auto; font-family: monospace; font-size: 12px; display: none; }
        .result-actions { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; justify-content: center; }
        .action-btn { padding: 8px 16px; border: none; border-radius: 8px; cursor: pointer; font-size: 12px; }
        .copy-btn { background: #28a745; color: white; }
        .download-btn { background: #007bff; color: white; }
        .clear-btn { background: #6c757d; color: white; }
        .github-btn { background: #17a2b8; color: white; }
        .ad-container { background: #f8f9fa; border: 2px dashed #dee2e6; border-radius: 8px; padding: 20px; text-align: center; margin: 10px 0; display: none; }
        @media (max-width: 768px) { .tool-card { padding: 15px; } .url-input, .extract-btn { font-size: 12px; padding: 10px; } }
    </style>
</head>
<body>
    <div class="container">
        <main class="tool-card">
            <div class="tool-header">
                <h2>Extract Transcript YouTube</h2>
                <p>Masukkan URL video YouTube untuk memulai ekstraksi</p>
            </div>
            <div class="input-group">
                <input type="url" class="url-input" id="youtubeUrl" placeholder="https://www.youtube.com/watch?v=example" aria-label="Masukkan URL Video YouTube"/>
                <select id="languageSelect" class="url-input" aria-label="Pilih bahasa transkrip">
                    <option value="en">English</option>
                    <option value="id">Indonesia</option>
                </select>
                <button class="extract-btn" onclick="triggerTranscriptExtraction()" id="extractBtn" aria-label="Mulai ekstraksi">Mulai Ekstraksi</button>
            </div>
            <div class="status-message" id="statusMessage" role="alert"></div>
            <div class="ad-container" id="adContainer">
                <div class="ad-placeholder">[ Advertisement ]</div>
            </div>
            <div class="result-area" id="resultArea" aria-live="polite"></div>
            <div class="result-actions" id="resultActions" style="display: none;">
                <button class="action-btn copy-btn" onclick="copyTranscript()" aria-label="Salin transkrip">üìã Copy</button>
                <button class="action-btn download-btn" onclick="downloadTranscript()" aria-label="Unduh transkrip">üíæ Download</button>
                <button class="action-btn clear-btn" onclick="clearResult()" aria-label="Hapus hasil">üóëÔ∏è Clear</button>
            </div>
        </main>
    </div>
    <script>
        let currentTranscript = '';

        function showStatus(message, type) {
            const statusElement = document.getElementById('statusMessage');
            statusElement.textContent = message;
            statusElement.className = `status-message status-${type}`;
            statusElement.style.display = 'block';
            setTimeout(() => { statusElement.style.display = 'none'; }, 5000);
        }

        function extractVideoId(url) {
            const regex = /(?:youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/)|youtu\.be\/)([^&\n?#]+)/;
            const match = url.match(regex);
            return match ? match[1] : null;
        }

        function sanitizeInput(input) {
            return input.replace(/[<>&"]/g, function(match) {
                return { '<': '&lt;', '>': '&gt;', '&': '&amp;', '"': '&quot;' }[match];
            });
        }

        function triggerTranscriptExtraction() {
            const urlInput = document.getElementById('youtubeUrl');
            const languageSelect = document.getElementById('languageSelect');
            const url = sanitizeInput(urlInput.value.trim());
            const selectedLanguage = languageSelect.value || 'en';

            if (!url) {
                showStatus('‚ö†Ô∏è Silakan masukkan URL YouTube!', 'error');
                return;
            }

            const videoId = extractVideoId(url);
            if (!videoId) {
                showStatus('‚ùå URL YouTube tidak valid!', 'error');
                return;
            }

            const extractBtn = document.getElementById('extractBtn');
            extractBtn.disabled = true;
            extractBtn.classList.add('loading');
            extractBtn.innerHTML = 'Memproses';
            showStatus('üîÑ Mengirim permintaan ke GitHub Actions...', 'loading');

            // Simulasi trigger (aktualnya akan dilakukan via GitHub Actions)
            showStatus('‚úÖ Permintaan berhasil dikirim! Cek Actions di GitHub.', 'success');
            extractBtn.disabled = false;
            extractBtn.classList.remove('loading');
            extractBtn.innerHTML = 'Mulai Ekstraksi';

            // Instruksi untuk pengguna (bisa dihapus jika workflow otomatis)
            alert('Silakan buka tab Actions di GitHub, pilih "Extract YouTube Transcript", dan masukkan URL serta bahasa untuk memulai ekstraksi.');
        }

        function displayResult() {
            const resultArea = document.getElementById('resultArea');
            const resultActions = document.getElementById('resultActions');
            resultArea.textContent = currentTranscript || 'Transkrip akan muncul setelah diproses oleh GitHub Actions.';
            resultArea.style.display = 'block';
            resultActions.style.display = 'flex';
        }

        function copyTranscript() {
            if (!currentTranscript) {
                showStatus('‚ùå Tidak ada transcript untuk disalin!', 'error');
                return;
            }
            navigator.clipboard.writeText(currentTranscript).then(() => {
                showStatus('üìã Transcript disalin!', 'success');
            }).catch(() => {
                showStatus('‚ùå Gagal menyalin transcript!', 'error');
            });
        }

        function downloadTranscript() {
            if (!currentTranscript) {
                showStatus('‚ùå Tidak ada transcript untuk didownload!', 'error');
                return;
            }
            const blob = new Blob([currentTranscript], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `transcript-${Date.now()}.txt`;
            a.click();
            URL.revokeObjectURL(url);
            showStatus('üíæ Transcript didownload!', 'success');
        }

        function clearResult() {
            currentTranscript = '';
            document.getElementById('resultArea').style.display = 'none';
            document.getElementById('resultActions').style.display = 'none';
            document.getElementById('youtubeUrl').value = '';
            document.getElementById('languageSelect').value = 'en';
            document.getElementById('adContainer').classList.remove('show');
            showStatus('üóëÔ∏è Hasil dihapus!', 'success');
        }

        // Fungsi save dihapus karena transkrip akan otomatis disimpan oleh GitHub Actions
    </script>
</body>
</html>
